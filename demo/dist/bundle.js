(()=>{"use strict";var e={522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._gameObject=void 0}get gameObject(){return this._gameObject}set gameObject(e){this._gameObject=e}}},750:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAnimationFrames=void 0;const s=r(i(825)),n=r(i(537));t.getAnimationFrames=e=>{const t=new Map;for(const i of e){const e=i.frames.map((e=>{const[t,i]=e;return new s.default(t,i)}));t.set(i.name,e)}return t};class a extends n.default{constructor(e,t){super(e),this._animations=new Map,this._timeElapsed=0,this._currentFrame=0,this._animations=t,[this._currentAnimation]=this._animations.keys(),this._frameTime=100,this.sourcePosition=this.currentFramePosition}get currentAnimationFrames(){return this._animations.get(this._currentAnimation)||[new s.default(0,0)]}get currentFramePosition(){return this.currentAnimationFrames[this._currentFrame]}set currentAnimation(e){this._animations.get(e)?this._currentAnimation=e:[this._currentAnimation]=this._animations.keys()}set frameTime(e){this._frameTime=e}get frameTime(){return this._frameTime}set currentFrame(e){this.currentFrame=e}get currentFrame(){return this._currentFrame}nextFrame(){this._currentFrame++,this._currentFrame>=this.currentAnimationFrames.length&&(this._currentFrame=0),this.sourcePosition=this.currentFramePosition}update(e){this._timeElapsed+=e,this._timeElapsed>=this._frameTime&&(this._timeElapsed=0,this.nextFrame())}}t.default=a},537:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(i(522)),n=r(i(825));class a extends s.default{constructor(e){super(),this._image=new Image,this._size=e,this._sourcePosition=new n.default(0,0)}get sourcePosition(){return this._sourcePosition}set sourcePosition(e){this._sourcePosition=n.default.mult(e,this._size)}get size(){return this._size}set size(e){this._size=e}get image(){return this._image.src}set image(e){this._image.src=e}imageLoaded(){return 0!=this._image.width&&0!=this._image.height&&this._image.complete}update(e){}draw(e){if(this.gameObject&&this.imageLoaded()){const t=this.gameObject.transform.position,i=this.gameObject.transform.scale;console.log(i.x,i.y,this._size.x,this._size.y),e.drawImage(this._image,this._sourcePosition.x,this._sourcePosition.y,this._size.x,this._size.y,t.x,t.y,this._size.x*i.x,this._size.y*i.y)}}}t.default=a},500:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Animation=void 0;const a=n(i(537)),o=n(i(750));t.Animation=o.default,s(i(537),t),s(i(750),t),t.default=a.default},863:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Texture=void 0;const a=n(i(522)),o=n(i(500));t.Texture=o.default,s(i(500),t),t.default=a.default},778:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(i(75)),n=r(i(74)),a=i(966);t.default=class{constructor(e,t){this._keyboard=new s.default,this._screen=new n.default(e,t||a.IndirectScreenSize.Default),this._gameObjects=[],this._lastTime=0}get keyboard(){return this._keyboard}get screen(){return this._screen}setSmoothing(e){const t="none"==e;this._screen.bufferCtx.imageSmoothingEnabled=!t,this._screen.bufferCtx.imageSmoothingQuality=t?"low":e}addGameObject(e){this._gameObjects.push(e)}start(){this._lastTime=Date.now(),this.onStart(),this.cycle()}update(e){for(const t of this._gameObjects)t.update(e);this.onUpdate(e)}draw(){for(const e of this._gameObjects)e.draw(this._screen.bufferCtx)}cycle(){const e=Date.now(),t=e-this._lastTime;this._lastTime=e,this._screen.clear(),this.update(t),this.draw(),this._screen.render(),requestAnimationFrame(this.cycle.bind(this))}}},726:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(i(259)),n=r(i(825));t.default=class{constructor(){this._components=[],this._transform=new s.default(new n.default(0,0),new n.default(1,1))}get transform(){return this._transform}set transform(e){this._transform=e}addComponent(e){e.gameObject=this,this._components.push(e)}update(e){for(const t of this._components)t.update(e)}draw(e){for(const t of this._components)t.draw(e)}}},706:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(i(726));t.default=s.default},330:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._keysDown=new Map,this.init()}init(){addEventListener("keydown",(e=>{this._keysDown.set(e.key,!0)})),addEventListener("keyup",(e=>{this._keysDown.set(e.key,!1)}))}isKeyDown(e){return!!this._keysDown.get(e)}}},75:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(i(330));s(i(330),t),t.default=a.default},74:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(966);t.default=class{constructor(e,t){this._bufferCavas=document.createElement("canvas"),this._canvas=e,(0,r.resizeCanvas)(this._bufferCavas,t),(0,r.resizeCanvas)(this._canvas,t);const i=this._canvas.getContext("2d"),s=this._bufferCavas.getContext("2d");if(!i||!s)throw new Error("Could not get canvas context");this._ctx=i,this._bufferCtx=s}clear(){this._bufferCtx.fillStyle="#ffffff",this._bufferCtx.fillRect(0,0,this._bufferCavas.width,this._bufferCavas.height)}get width(){return this._bufferCavas.width}get height(){return this._bufferCavas.height}get dimensions(){return[this._bufferCavas.width,this._bufferCavas.height]}get bufferCtx(){return this._bufferCtx}render(){this._ctx.drawImage(this._bufferCavas,0,0)}}},966:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.resizeCanvas=t.IndirectScreenSize=void 0,function(e){e[e.Default=0]="Default",e[e.MatchCanvas=1]="MatchCanvas",e[e.GameBoy=2]="GameBoy",e[e.NES=3]="NES",e[e.HD_1080=4]="HD_1080",e[e.HD_720=5]="HD_720"}(i||(i={})),t.IndirectScreenSize=i;const r=(e,t)=>{switch(t){case i.Default:r(e,i.HD_720);break;case i.MatchCanvas:r(e,[e.width,e.height]);break;case i.GameBoy:r(e,[160,144]);break;case i.NES:r(e,[256,240]);break;case i.GameBoy:r(e,[160,144]);break;case i.HD_1080:r(e,[1920,1080]);break;case i.HD_720:r(e,[1280,720]);break;default:[e.width,e.height]=t}};t.resizeCanvas=r},43:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(i(74));s(i(74),t),s(i(966),t),t.default=a.default},841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this._position=e,this._scale=t}set position(e){this._position=e}get position(){return this._position}set scale(e){this._scale=e}get scale(){return this._scale}}},259:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(i(841));t.default=s.default},551:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){this._x=e,this._y=t}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}static add(e,t){return new i(e._x+t._x,e._y+t._y)}static sub(e,t){return new i(e._x-t._x,e._y-t._y)}static mult(e,t){return new i(e._x*t._x,e._y*t._y)}static div(e,t){return new i(e._x/t._x,e._y/t._y)}add(e){this._x+=e._x,this._y+=e._y}sub(e){this._x-=e._x,this._y-=e._y}mult(e){this._x*=e._x,this._y*=e._y}div(e){this._x/=e._x,this._y/=e._y}}t.default=i},825:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(i(551));t.default=s.default},824:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=t.Component=t.Vect2=t.Transform=t.GameObject=void 0;const a=n(i(778)),o=n(i(259));t.Transform=o.default;const u=n(i(706));t.GameObject=u.default;const c=n(i(825));t.Vect2=c.default;const _=n(i(863));t.Component=_.default;const h=n(i(43));t.Screen=h.default,s(i(778),t),s(i(259),t),s(i(825),t),s(i(706),t),s(i(863),t),s(i(43),t),t.default=a.default}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=i(824),t=i.n(e);const r=(0,e.getAnimationFrames)([{name:"idle",frames:[[0,0],[0,0],[2,0],[2,0]]},{name:"frontRun",frames:[[4,0],[5,0],[6,0],[7,0],[0,1]]},{name:"backRun",frames:[[1,1],[2,1],[3,1],[4,1],[5,1]]},{name:"rightRun",frames:[[6,1],[7,1],[0,2],[1,2],[2,2],[3,2]]},{name:"leftRun",frames:[[4,2],[5,2],[6,2],[7,2],[0,3],[1,3]]}]);class s extends(t()){constructor(t){super(t,e.IndirectScreenSize.NES),this.texture=new e.Animation(new e.Vect2(42,42),r),this.texture.frameTime=70,this.texture.image="./assets/character.png"}onStart(){const t=new e.GameObject;t.addComponent(this.texture),this.addGameObject(t),this.setSmoothing("none")}onUpdate(t){const i=this.keyboard.isKeyDown("w"),r=this.keyboard.isKeyDown("s"),s=this.keyboard.isKeyDown("a"),n=this.keyboard.isKeyDown("d"),a=i||r||s||n;i&&(this.texture.currentAnimation="backRun",this.texture.frameTime=70,this.texture.gameObject.transform.position.add(new e.Vect2(0,-.05*t))),r&&(this.texture.currentAnimation="frontRun",this.texture.frameTime=70,this.texture.gameObject.transform.position.add(new e.Vect2(0,.05*t))),n&&(this.texture.currentAnimation="rightRun",this.texture.frameTime=100,this.texture.gameObject.transform.position.add(new e.Vect2(.05*t,0))),s&&(this.texture.currentAnimation="leftRun",this.texture.frameTime=100,this.texture.gameObject.transform.position.add(new e.Vect2(-.05*t,0))),a||(this.texture.currentAnimation="idle")}}const n=s,a=document.querySelector("#canvas"),o=new n(a);((e,t,i)=>{const r=()=>{const r=window.innerWidth,s=window.innerHeight;r/s>t/i?(e.style.width=t*s/i+"px",e.style.height="100%"):(e.style.width="100%",e.style.height=i*r/t+"px")};addEventListener("resize",r),r()})(a,o.screen.width,o.screen.height),o.start()})()})();